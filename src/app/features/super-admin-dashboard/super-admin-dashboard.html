<div class="admin-layout">
  <!-- Topbar -->
  <header class="topbar">
    <div class="topbar-left">
      <button
        tuiButton
        appearance="flat"
        size="s"
        class="menu-toggle"
        (click)="toggleMobileMenu()"
      >
        <tui-icon icon="@tui.menu" />
      </button>
      <button
        tuiButton
        appearance="flat"
        size="s"
        class="sidebar-toggle"
        (click)="toggleSidebar()"
      >
        <tui-icon [icon]="isSidebarCollapsed() ? '@tui.chevrons-right' : '@tui.chevrons-left'" />
      </button>
      <h1 class="topbar-title">SUPER ADMIN</h1>
    </div>

    <div class="topbar-right">
      <button tuiButton appearance="flat" size="s" class="icon-button">
        <tui-icon icon="@tui.bell" />
      </button>
      <div class="user-info">
        <span class="user-name">{{ authService.user()?.firstName }}</span>
        <button
          tuiButton
          appearance="secondary"
          size="s"
          (click)="logout()"
        >
          Logout
        </button>
      </div>
    </div>
  </header>

  <!-- Sidebar -->
  <aside
    class="sidebar"
    [class.collapsed]="isSidebarCollapsed()"
    [class.mobile-open]="isMobileMenuOpen()"
  >
    <div class="sidebar-header">
      <img
        ngSrc="assets/images/gamepulse_logo.png"
        width="40"
        height="40"
        alt="GamePulse Logo"
        class="sidebar-logo"
      />
      @if (!isSidebarCollapsed()) {
        <span class="sidebar-brand">GAMEPULSE</span>
      }
    </div>

    <nav class="sidebar-nav">
      @for (item of navItems; track item.label) {
        @if (item.children) {
          <div class="nav-item-wrapper">
            <button
              class="nav-item"
              [class.expanded]="item.expanded"
              (click)="toggleAccordion(item)"
            >
              <tui-icon [icon]="item.icon" class="nav-icon" />
              @if (!isSidebarCollapsed()) {
                <span class="nav-label">{{ item.label }}</span>
                <tui-icon
                  [icon]="item.expanded ? '@tui.chevron-up' : '@tui.chevron-down'"
                  class="nav-arrow"
                />
              }
            </button>
            @if (item.expanded && !isSidebarCollapsed()) {
              <div class="nav-children">
                @for (child of item.children; track child.label) {
                  <a class="nav-child" [href]="child.route">
                    <tui-icon [icon]="child.icon" class="nav-icon" />
                    <span class="nav-label">{{ child.label }}</span>
                  </a>
                }
              </div>
            }
          </div>
        } @else {
          <a class="nav-item" [href]="item.route">
            <tui-icon [icon]="item.icon" class="nav-icon" />
            @if (!isSidebarCollapsed()) {
              <span class="nav-label">{{ item.label }}</span>
            }
          </a>
        }
      }
    </nav>
  </aside>

  <!-- Mobile Overlay -->
  @if (isMobileMenuOpen()) {
    <div class="mobile-overlay" (click)="toggleMobileMenu()"></div>
  }

  <!-- Main Content -->
  <main class="main-content">
    <div class="content-wrapper">
      <h2>Dashboard Overview</h2>
      <p>Welcome {{ authService.user()?.firstName }} {{ authService.user()?.lastName }}!</p>
      <p>Email: {{ authService.user()?.email }}</p>
      <p>Role: {{ authService.user()?.role }}</p>
    </div>
  </main>
</div>
